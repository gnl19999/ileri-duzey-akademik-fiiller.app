<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kelime Ã–ÄŸrenme UygulamasÄ±</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f4f6f8;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
        }

        .container {
            width: 100%;
            max-width: 500px;
        }

        /* --- Ortak GÃ¶rÃ¼nÃ¼mler --- */
        .screen {
            display: none;
        }
        .screen.active {
            display: block;
        }

        /* --- Ãœnite Listesi (List Screen) Stilleri --- */
        .unit-card {
            background-color: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            border: 1px solid #e1e4e8;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .unit-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }

        /* Renkli Daireler */
        .circle {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 20px;
            margin-right: 15px;
            flex-shrink: 0;
        }

        /* Daire Renkleri */
        .c-red { background-color: #d9534f; }
        .c-blue { background-color: #0275d8; }
        .c-black { background-color: #292b2c; }
        .c-green { background-color: #8bc34a; }
        .c-orange { background-color: #f0ad4e; }
        .c-pink { background-color: #e91e63; }
        .c-cyan { background-color: #5bc0de; }
        .c-dark { background-color: #37474f; }

        /* YazÄ± AlanÄ± */
        .info h3 {
            margin: 0 0 5px 0;
            color: #333;
            font-size: 18px;
        }

        .info p {
            margin: 0;
            color: #6c757d;
            font-size: 14px;
        }

        /* --- Ãœnite Detay (Detail Screen) Stilleri --- */
        .detail-header {
            display: flex;
            align-items: center;
            margin-bottom: 20px;
        }
        .detail-header .back-button {
            font-size: 24px;
            color: #6c757d;
            cursor: pointer;
            margin-right: 15px;
        }
        .detail-header h2 {
            margin: 0;
            font-size: 24px;
            color: #333;
            flex-grow: 1;
            text-align: center;
        }
        .detail-header .unit-circle {
            width: 60px;
            height: 60px;
            font-size: 28px;
            margin: 0 auto 10px auto;
        }
        .detail-info {
            text-align: center;
            margin-bottom: 20px;
        }
        .detail-info p {
            color: #6c757d;
            font-size: 16px;
        }

        /* Kelime Listesi */
        .word-list {
            list-style: none;
            padding: 0;
        }
        .word-item {
            background-color: white;
            border-radius: 8px;
            padding: 12px 15px;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            box-shadow: 0 1px 3px rgba(0,0,0,0.05);
            cursor: pointer; /* TÄ±klanabilir olduÄŸunu belirt */
            border: 1px solid #e1e4e8;
            transition: background-color 0.3s, border-color 0.3s;
        }

        .word-item.learned {
            background-color: #e6ffe6; /* Ã–ÄŸrenildiÄŸinde aÃ§Ä±k yeÅŸil arka plan */
            border-left: 5px solid #4CAF50; /* YeÅŸil kalÄ±n sol Ã§izgi */
            opacity: 0.7;
        }

        .word-item .word-icon {
            width: 40px;
            height: 40px;
            margin-right: 10px;
            border-radius: 50%;
            background-color: #f0f0f0;
            color: #333;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            flex-shrink: 0;
        }

        .word-item.learned .word-icon {
            background-color: #4CAF50; /* Ã–ÄŸrenildiÄŸinde ikon yeÅŸil */
            color: white;
        }

        .word-item .text-content {
            flex-grow: 1;
        }
        .word-item .text-content .english-word {
            font-weight: bold;
            color: #333;
            font-size: 16px;
        }
        .word-item.learned .text-content .english-word {
             text-decoration: line-through; /* Ã–ÄŸrenilen kelimeyi Ã§iz */
             color: #6c757d;
        }
        .word-item .text-content .turkish-meaning {
            color: #6c757d;
            font-size: 14px;
            margin-top: 2px;
        }
    </style>
</head>
<body>

    <div class="container">
        <div id="list-screen" class="screen active">
            </div>

        <div id="detail-screen" class="screen">
            <div class="detail-header">
                <span class="back-button" onclick="showListScreen()">&#10005;</span> <h2 id="detail-unit-title">Ãœnite X</h2>
                </div>
            
            <div class="detail-info">
                <div id="detail-unit-circle" class="circle detail-header-circle c-red"></div>
                <p>Bu Ã¼nitede Ã§alÄ±ÅŸÄ±lacak toplam <span id="total-word-count" style="font-weight: bold; color: #f0ad4e;">0</span> kelime var.</p>
                <p><span id="learned-word-count" style="font-weight: bold; color: #4CAF50;">0</span> kelime Ã¶ÄŸrenildi.</p>
                
                <p><input type="checkbox" id="hide-learned" onchange="filterWords()"> <label for="hide-learned">Ã–ÄŸrenilen kelimeleri gizle</label></p>
            </div>
            
            <ul id="unit-word-list" class="word-list">
                </ul>
        </div>
    </div>

    <script>
        // --- Global DeÄŸiÅŸkenler ---
        let currentUnitWords = [];
        let currentUnitNumber = null;

        // --- 1. Kelime Havuzu ve Rastgele SeÃ§im Fonksiyonu (ID eklendi) ---
        // Her kelimenin artÄ±k kendine ait benzersiz bir ID'si var
        const wordPool = [
            { id: 1, word: "add", meaning: "eklemek" },
            { id: 2, word: "call", meaning: "aramak, Ã§aÄŸÄ±rmak" },
            { id: 3, word: "create", meaning: "yaratmak, oluÅŸturmak" },
            { id: 4, word: "finish", meaning: "bitirmek, tamamlamak" },
            { id: 5, word: "hide", meaning: "gizlemek, saklamak" },
            { id: 6, word: "listen", meaning: "dinlemek" },
            { id: 7, word: "work", meaning: "Ã§alÄ±ÅŸmak, iÅŸ" },
            { id: 8, word: "write", meaning: "yazmak" },
            { id: 9, word: "read", meaning: "okumak" },
            { id: 10, word: "speak", meaning: "konuÅŸmak" },
            { id: 11, word: "travel", meaning: "seyahat etmek" },
            { id: 12, word: "find", meaning: "bulmak" },
            { id: 13, word: "lose", meaning: "kaybetmek" },
            { id: 14, word: "walk", meaning: "yÃ¼rÃ¼mek" },
            { id: 15, word: "run", meaning: "koÅŸmak" },
            { id: 16, word: "understand", meaning: "anlamak" },
            { id: 17, word: "remember", meaning: "hatÄ±rlamak" },
            { id: 18, word: "forget", meaning: "unutmak" },
            { id: 19, word: "want", meaning: "istemek" },
            { id: 20, word: "need", meaning: "ihtiyaÃ§ duymak" },
            { id: 21, word: "look", meaning: "bakmak" },
            { id: 22, "word": "feel", meaning: "hissetmek" },
            { id: 23, "word": "open", meaning: "aÃ§mak" },
            { id: 24, "word": "close", meaning: "kapatmak" },
            { id: 25, "word": "start", meaning: "baÅŸlamak" },
            { id: 26, "word": "stop", meaning: "durmak, bitmek" },
            { id: 27, "word": "sleep", meaning: "uyumak" },
            { id: 28, "word": "eat", meaning: "yemek yemek" },
            { id: 29, "word": "drink", meaning: "iÃ§mek" },
            { id: 30, "word": "help", meaning: "yardÄ±m etmek" },
        ];
        
        // Ãœniteye ait kelimeleri getiren fonksiyon (ArtÄ±k her Ã¼niteye sabit kelimeler atandÄ±)
        function getUnitWords(unitNumber) {
            const wordsPerUnit = 10;
            const startIndex = (unitNumber - 1) * wordsPerUnit;
            // SÃ¶zlÃ¼k havuzundan ilgili dilimi al
            return wordPool.slice(startIndex, startIndex + wordsPerUnit);
        }

        // --- 2. LocalStorage FonksiyonlarÄ± ---

        // Kelimenin Ã¶ÄŸrenildi durumunu LocalStorage'a kaydeder
        function saveWordLearnedStatus(unitId, wordId, isLearned) {
            const key = `unit_${unitId}_word_${wordId}_learned`;
            localStorage.setItem(key, isLearned ? 'true' : 'false');
            // Liste gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ tekrar oluÅŸturarak Ã¶ÄŸrenilen kelime sayÄ±sÄ±nÄ± gÃ¼ncelleyelim
            updateUnitListLearnedCount();
        }

        // Kelimenin Ã¶ÄŸrenildi durumunu LocalStorage'dan alÄ±r
        function isWordLearned(unitId, wordId) {
            const key = `unit_${unitId}_word_${wordId}_learned`;
            return localStorage.getItem(key) === 'true';
        }

        // Belirli bir Ã¼nitedeki Ã¶ÄŸrenilmiÅŸ kelime sayÄ±sÄ±nÄ± hesaplar
        function countLearnedWords(unitNumber) {
            const words = getUnitWords(unitNumber);
            let count = 0;
            words.forEach(word => {
                if (isWordLearned(unitNumber, word.id)) {
                    count++;
                }
            });
            return count;
        }

        // --- 3. Ãœnite Listesi OluÅŸturma ve GÃ¼ncelleme ---
        const listScreen = document.getElementById('list-screen');
        const unitCount = 3; // 30 kelime olduÄŸu iÃ§in 3 Ã¼nite (10'ar kelime)
        const colorClasses = ['c-red', 'c-blue', 'c-black', 'c-green', 'c-orange', 'c-pink', 'c-cyan', 'c-dark'];

        function updateUnitListLearnedCount() {
            // Ã–nceki listeyi temizle
            listScreen.innerHTML = ''; 
            createUnitList();
        }

        function createUnitList() {
            for (let i = 1; i <= unitCount; i++) {
                const colorClass = colorClasses[(i - 1) % colorClasses.length];
                const totalWords = getUnitWords(i).length;
                const learned = countLearnedWords(i); // LocalStorage'dan say

                const card = document.createElement('div');
                card.className = 'unit-card';
                card.setAttribute('onclick', `showDetailScreen(${i}, '${colorClass}')`);

                card.innerHTML = `
                    <div class="circle ${colorClass}">${i}</div>
                    <div class="info">
                        <h3>Ãœnite ${i}</h3>
                        <p>${learned}/${totalWords} kelime Ã¶ÄŸrenildi.</p>
                    </div>
                `;
                listScreen.appendChild(card);
            }
        }
        createUnitList(); // Listeyi baÅŸlangÄ±Ã§ta oluÅŸtur

        // --- 4. Kelime Durumu DeÄŸiÅŸtirme ve Filtreleme ---

        // Kelimenin Ã¶ÄŸrenildi/Ã¶ÄŸrenilmedi durumunu deÄŸiÅŸtirir
        function toggleWordLearnedStatus(wordId) {
            const isLearnedNow = isWordLearned(currentUnitNumber, wordId);
            const newStatus = !isLearnedNow;
            
            // LocalStorage'Ä± gÃ¼ncelle
            saveWordLearnedStatus(currentUnitNumber, wordId, newStatus);
            
            // UI'Ä± gÃ¼ncelle
            const listItem = document.querySelector(`.word-item[data-word-id="${wordId}"]`);
            if (listItem) {
                if (newStatus) {
                    listItem.classList.add('learned');
                } else {
                    listItem.classList.remove('learned');
                }
            }

            // SayÄ±mÄ± ve filtreyi gÃ¼ncelle
            updateDetailScreenCounts();
            filterWords(); // Durum deÄŸiÅŸince filtreyi tekrar uygula
        }
        
        // Detay ekranÄ±ndaki Ã¶ÄŸrenilen/toplam kelime sayÄ±sÄ±nÄ± gÃ¼nceller
        function updateDetailScreenCounts() {
            const totalWords = currentUnitWords.length;
            const learnedWords = countLearnedWords(currentUnitNumber);

            document.getElementById('total-word-count').textContent = totalWords;
            document.getElementById('learned-word-count').textContent = learnedWords;
        }


        // Ã–ÄŸrenilen kelimeleri gizleme filtresini uygular
        function filterWords() {
            const hideChecked = document.getElementById('hide-learned').checked;
            const wordListItems = document.querySelectorAll('#unit-word-list .word-item');
            
            wordListItems.forEach(item => {
                const isLearned = item.classList.contains('learned');
                
                if (hideChecked && isLearned) {
                    item.style.display = 'none';
                } else {
                    item.style.display = 'flex';
                }
            });
        }


        // --- 5. Ekran YÃ¶netimi FonksiyonlarÄ± ---
        const detailScreen = document.getElementById('detail-screen');

        function showDetailScreen(unitNumber, colorClass) {
            currentUnitNumber = unitNumber;
            currentUnitWords = getUnitWords(unitNumber); // Ãœniteye ait sabit kelimeleri al

            // Ekran geÃ§iÅŸi
            document.getElementById('list-screen').classList.remove('active');
            detailScreen.classList.add('active');

            // BaÅŸlÄ±k ve daireyi gÃ¼ncelle
            document.getElementById('detail-unit-title').textContent = `Ãœnite ${unitNumber}`;
            const unitCircle = document.getElementById('detail-unit-circle');
            unitCircle.textContent = unitNumber;
            unitCircle.className = `circle detail-header-circle ${colorClass}`;

            const wordListElement = document.getElementById('unit-word-list');
            wordListElement.innerHTML = ''; // Ã–nceki kelimeleri temizle

            currentUnitWords.forEach(item => {
                // Kelimenin LocalStorage'daki durumunu kontrol et
                const learnedStatus = isWordLearned(unitNumber, item.id);
                
                const randomEmoji = ['ğŸŒ¿', 'ğŸ“', 'ğŸ“', 'ğŸ’¡', 'â•', 'ğŸ’¨'][Math.floor(Math.random() * 6)];
                const listItem = document.createElement('li');
                
                // data-word-id Ã¶zelliÄŸini ve learned sÄ±nÄ±fÄ±nÄ± ekle
                listItem.className = `word-item ${learnedStatus ? 'learned' : ''}`;
                listItem.setAttribute('data-word-id', item.id);
                // Kelimeye tÄ±klandÄ±ÄŸÄ±nda durumu deÄŸiÅŸtirecek olay dinleyicisini ekle
                listItem.setAttribute('onclick', `toggleWordLearnedStatus(${item.id})`);

                listItem.innerHTML = `
                    <div class="word-icon">${learnedStatus ? 'âœ“' : randomEmoji}</div>
                    <div class="text-content">
                        <div class="english-word">${item.word}</div>
                        <div class="turkish-meaning">${item.meaning}</div>
                    </div>
                `;
                wordListElement.appendChild(listItem);
            });
            
            // SayÄ±mlarÄ± ve filtreyi baÅŸlangÄ±Ã§ta ayarla
            updateDetailScreenCounts();
            document.getElementById('hide-learned').checked = false; // Detay aÃ§Ä±ldÄ±ÄŸÄ±nda filtre kapalÄ± olsun
            filterWords();
        }

        function showListScreen() {
            // Liste ekranÄ±nÄ± aktive et
            document.getElementById('list-screen').classList.add('active');
            detailScreen.classList.remove('active');
            
            // Listeye dÃ¶nerken Ã¼nite kartlarÄ±ndaki Ã¶ÄŸrenilen sayÄ±sÄ±nÄ± gÃ¼ncelle
            updateUnitListLearnedCount();
        }

        // BaÅŸlangÄ±Ã§ta listeyi gÃ¶ster
        document.addEventListener('DOMContentLoaded', () => {
             document.getElementById('list-screen').classList.add('active');
        });
    </script>
</body>
</html>
